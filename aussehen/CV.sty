%! Package = cv
%! Author = martin
%! Date = 30.06.21

\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{aussehen/CV}[2021/06/30 cv theming Package]

\usepackage[ngerman]{babel,isodate}

% moderncv themes
\moderncvstyle{casual} % style options are 'casual' (default), 'classic', 'banking', 'oldstyle' and 'fancy'
\moderncvcolor{blue} % color options 'black', 'blue' (default), 'burgundy', 'green', 'grey', 'orange', 'purple' and 'red'

\usepackage[firstyear=2009,lastyear=2022,marksyr=0.4ex,marksmo=0.2ex]{moderntimeline}

% adjust the page margins
\usepackage[scale=0.75]{geometry}
\setlength{\footskip}{136.00005pt} % depending on the amount of information in the footer, you need to change this value. comment this line out and set it to the size given in the warning
%\setlength{\hintscolumnwidth}{3cm}                % if you want to change the width of the column with the dates
%\setlength{\makecvheadnamewidth}{10cm}            % for the 'classic' style, if you want to force the width allocated to your name and avoid line breaks. be careful though, the length is normally calculated to avoid any overlap with your personal info; use this at your own typographical risks...

% font loading
% for luatex and xetex, do not use inputenc and fontenc
% see https://tex.stackexchange.com/a/496643
\ifxetexorluatex
\RequirePackage{fontspec}
\usepackage{unicode-math}
\defaultfontfeatures{Ligatures=TeX}
\setmainfont{Latin Modern Roman}
\setsansfont{Latin Modern Sans}
\setmonofont{Latin Modern Mono}
\setmathfont{Latin Modern Math}
\else
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\RequirePackage{lmodern}
\fi

% bibliography adjustments (only useful if you make citations in your resume, or print a list of publications using BibTeX)
%   to show numerical labels in the bibliography (default is to show no labels)
%\makeatletter\renewcommand*{\bibliographyitemlabel}{\@biblabel{\arabic{enumiv}}}\makeatother
\renewcommand*{\bibliographyitemlabel}{[\arabic{enumiv}]}
% Titel der Publikationen ändern
\renewcommand{\refname}{Veröffentlichungen}
\bibliographystyle{plain}

% bibliography with mutiple entries
%\usepackage{multibib}
%\newcites{book,misc}{{Books},{Others}}

% TODO WORKAROUND avoid orphaned section headers
% https://github.com/moderncv/moderncv/issues/10
% https://github.com/xdanaux/moderncv/issues/82
\usepackage{needspace}
\let\oldsection=\section
\renewcommand{\section}{
    \needspace{3\baselineskip}
    \oldsection
}
